
grammar ASTify-grammar

Union(string typename, string[] subtypes)
: 'union' .typename ':' .subtypes(':')

Type(string name, bool optional, bool lst)
: .name .optional('?') .lst('[' ']')

TypedName(Type type, string name)
: .type .name

NamedPropertyList(string name, TypedName[] properties)
: .name '(' [.properties(',')] ')'

AbstractTypeDefinition(NamedPropertyList properties)
: 'abstract' .properties

ParameterReference(string parameter, Pattern[] delimiter)
: '.' .parameter ['(' .delimiter ')']

Terminal(string terminal)
: .terminal

Optional(Pattern[] patterns)
: '[' .patterns ']'

PatternList(Pattern[] patterns)
: .patterns

TypeDefinition(NamedPropertyList properties, PatternList[] patterns)
: .properties ':' .patterns(':')

Grammar(string name)
: 'grammar' .name

ASTify-grammar(Grammar _grammar, Definition[] definitions)
: ._grammar .definitions

union Pattern
: ParameterReference
: Terminal
: Optional

union Definition
: TypeDefinition
: AbstractTypeDefinition
: Union
